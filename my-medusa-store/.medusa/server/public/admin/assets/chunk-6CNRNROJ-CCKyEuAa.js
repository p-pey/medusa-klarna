import{r as c,cn as x,co as g,cp as q,k as v}from"./index-zDamnV0F.js";var E=()=>{const[n,r]=c.useState(""),[s,t]=c.useState(""),a=c.useCallback(x(i=>t(i),300),[]);return c.useEffect(()=>(a(n),()=>a.cancel()),[n,a]),{searchValue:n,onSearchValueChange:r,query:s||void 0}},C=({queryKey:n,queryFn:r,getOptions:s,defaultValue:t,defaultValueKey:a,pageSize:i=10})=>{const{searchValue:u,onSearchValueChange:b,query:f}=E(),p=a||"id",{data:h}=g({queryKey:n,queryFn:async()=>r({[p]:t,limit:Array.isArray(t)?t.length:1}),enabled:!!t}),{data:d,...l}=q({queryKey:[...n,f],queryFn:async({pageParam:e=0})=>await r({q:f,limit:i,offset:e}),initialPageParam:0,getNextPageParam:e=>e.count>e.offset+e.limit?e.offset+e.limit:void 0,placeholderData:v}),o=(d==null?void 0:d.pages.flatMap(e=>s(e)))??[],m=h?s(h):[],D=!l.isPending&&!o.length&&!u;return t&&m.length&&!u&&m.forEach(e=>{o.find(y=>y.value===e.value)||o.unshift(e)}),{options:o,searchValue:u,onSearchValueChange:b,disabled:D,...l}};export{E as a,C as u};
